---
import Layout from "../layouts/Layout.astro";
import OffreCard from "../components/OffreCard.astro";
import { getOffres } from "../backend.mjs";

const offres = await getOffres();
---
<Layout titre="Offres immobilières">
	 <section class="text-center mb-10">
			 <h1 class="text-3xl md:text-4xl font-bold mb-4 text-purple-100 drop-shadow">Nos offres immobilières</h1>
			 <p class="text-lg text-slate-100 mb-8 drop-shadow">Appartements, maisons et locaux à vendre ou à louer.</p>
	 </section>
                <div class="flex justify-center mb-6">
                    <button id="favori-button" class="bg-purple-800 hover:bg-[#a78bfa] transition rounded-lg text-white p-2 font-semibold shadow">Afficher les favoris</button>
                </div>
        <div id="offres-container" class="thumbnails grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 justify-items-center">
            {offres.length === 0 && (
                <div class="text-white text-xl col-span-full">Aucune offre trouvée.</div>
            )}
            {offres.map((offre) => (
                <div class="offre" data-favori={offre.Favori ? 'true' : 'false'}>
                    <OffreCard offre={offre} />
                </div>
            ))}
        </div>
		
<div>
  
</div>

</Layout>

<script>
    const button = document.getElementById('Favori');
    let showOnlyFavorites = false;
    button?.addEventListener('click', () => {
        showOnlyFavorites = !showOnlyFavorites;
        const offres = document.querySelectorAll('Nom_maison');
        offres.forEach(offre => {
            const isFavori = offre.dataset.favori === 'true';
            if (showOnlyFavorites) {
                offre.style.display = isFavori ? 'block' : 'none';
                button.textContent = 'Afficher tout';
            } else {
                offre.style.display = 'block';
                button.textContent = 'Afficher les favoris';
            }
        });
    });
</script>
